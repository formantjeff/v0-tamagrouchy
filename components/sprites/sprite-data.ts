import { SpriteSet, SpriteFrame } from './sprite-types'

// Helper to create a frame from a 16x16 string array for easier editing
const f = (rows: string[], duration: number = 500): SpriteFrame => ({
  pixels: rows.map(row => row.split('').map(c => c === '#' ? 1 : 0)),
  duration
})

// Base teen sprite shape
const TEEN_BASE = [
  "................",
  ".....######.....",
  "....########....",
  "...##########...",
  "..############..",
  "..############..",
  "..##..####..##..",
  "..##..####..##..",
  "..############..",
  "..###..##..###..",
  "...##########...",
  "....########....",
  ".....######.....",
  "....##....##....",
  "...##......##...",
  "................"
]

// Variations for animation
const TEEN_BOB_DOWN = [
  "................",
  "................",
  ".....######.....",
  "....########....",
  "...##########...",
  "..############..",
  "..############..",
  "..##..####..##..",
  "..##..####..##..",
  "..############..",
  "..###..##..###..",
  "...##########...",
  "....########....",
  ".....######.....",
  "....##....##....",
  "...##......##..."
]

const TEEN_HAPPY = [
  "................",
  ".....######.....",
  "....########....",
  "...##########...",
  "..############..",
  "..############..",
  "..##..####..##..",
  "..##.^####^.##..",
  "..###.####.###..", 
  "...####..####...", 
  "...##########...",
  "....########....",
  ".....######.....",
  "....##....##....",
  "...##......##...",
  "................"
].map(r => r.replace(/\^/g, ' ')) // Eyes closed happy

const TEEN_SAD_1 = [
  "................",
  ".....######.....",
  "....########....",
  "...##########...",
  "..############..",
  "..############..",
  "..##..####..##..",
  "..##..####..##..",
  "..###.####.###..", // Tears start here (Row 8)
  "..############..",
  "...###....###...",   
  "....########....",
  ".....######.....",
  "....##....##....",
  "...##......##...",
  "................"
]

const TEEN_SAD_2 = [
  "................",
  ".....######.....",
  "....########....",
  "...##########...",
  "..############..",
  "..############..",
  "..##..####..##..",
  "..##..####..##..",
  "..############..", // Tears gone from here
  "..###.####.###..", // Tears move down to here (Row 9)
  "...###....###...",   
  "....########....",
  ".....######.....",
  "....##....##....",
  "...##......##...",
  "................"
]

const TEEN_SHOWER_1 = [
  ".#...#...#...#..",
  "..#...#...#...#.",
  ".....######.....",
  "....########....",
  "...##########...",
  "..############..",
  "..############..",
  "..##..####..##..",
  "..##.^####^.##..",
  "..###.####.###..", 
  "...####..####...", 
  "...##########...",
  "....########....",
  ".....######.....",
  "....##....##....",
  "...##......##..."
].map(r => r.replace(/\^/g, ' '))

const TEEN_SHOWER_2 = [
  "..#...#...#...#.",
  ".#...#...#...#..",
  ".....######.....",
  "....########....",
  "...##########...",
  "..############..",
  "..############..",
  "..##..####..##..",
  "..##.^####^.##..",
  "..###.####.###..", 
  "...####..####...", 
  "...##########...",
  "....########....",
  ".....######.....",
  "....##....##....",
  "...##......##..."
].map(r => r.replace(/\^/g, ' '))

const TEEN_SICK_1 = [
  "................",
  ".....######.....",
  "....########....",
  "...##########...",
  "..############..",
  "..############..",
  "..##.X####X.##..", // X eyes
  "..##..####..##..",
  "..############..",
  "..###..##..###..", // Wavy mouth part 1
  "...##########...",
  "....########....",
  ".....######.....",
  "....##....##....",
  "...##......##...",
  "................"
].map(r => r.replace(/X/g, ' '))

const TEEN_SICK_2 = [
  "................",
  ".....######.....",
  "....########....",
  "...##########...",
  "..############..",
  "..############..",
  "..##.X####X.##..", // X eyes
  "..##..####..##..",
  "..############..",
  "..###......###..", // Wavy mouth part 2 (flat)
  "...##########...",
  "....########....",
  ".....######.....",
  "....##....##....",
  "...##......##...",
  "................"
].map(r => r.replace(/X/g, ' '))

const TEEN_EATING_1 = [
  "................",
  ".....######.....",
  "....########....",
  "...##########...",
  "..############..",
  "..############..",
  "..##..####..##..",
  "..##..####..##..",
  "..############..",
  "..###.####.###..", // Open mouth top
  "...###....###...", // Open mouth bottom (gap)
  "....########....",
  ".....######.....",
  "....##....##....",
  "...##......##...",
  "................"
]

const TEEN_EATING_2 = [
  "................",
  ".....######.....",
  "....########....",
  "...##########...",
  "..############..",
  "..############..",
  "..##..####..##..",
  "..##..####..##..",
  "..############..",
  "..###..##..###..", // Closed mouth
  "...##########...",
  "....########....",
  ".....######.....",
  "....##....##....",
  "...##......##...",
  "................"
]

const TEEN_DEAD_FIXED = [
  "................",
  ".....######.....",
  "....########....",
  "...##########...",
  "..############..",
  "..############..",
  "..##.#.##.#.##..", // X eyes: #.#
  "..##..#..#..##..", //         .#.
  "..##.#.##.#.##..", //         #.#
  "..############..",
  "..###..##..###..",
  "...##########...",
  "....########....",
  ".....######.....",
  "....##....##....",
  "...##......##..."
]

export const TEEN_SPRITES: SpriteSet = {
  idle: {
    neutral: {
      frames: [f(TEEN_BASE, 800), f(TEEN_BOB_DOWN, 800)],
      loop: true
    },
    happy: {
      frames: [f(TEEN_HAPPY, 400), f(TEEN_BASE, 400)],
      loop: true
    },
    sad: {
      frames: [f(TEEN_SAD_1, 500), f(TEEN_SAD_2, 500)],
      loop: true
    },
    sick: {
      frames: [f(TEEN_SICK_1, 800), f(TEEN_SICK_2, 800)], 
      loop: true
    },
    sleeping: {
      frames: [f(TEEN_BOB_DOWN, 1500), f(TEEN_BASE, 1500)],
      loop: true
    },
    dead: {
      frames: [f(TEEN_DEAD_FIXED, 1000)],
      loop: false
    }
  },
  actions: {
    idle: { frames: [f(TEEN_BASE)], loop: true },
    eating: {
      frames: [f(TEEN_EATING_1, 300), f(TEEN_EATING_2, 300), f(TEEN_EATING_1, 300), f(TEEN_EATING_2, 300)],
      loop: true
    },
    playing: {
      frames: [f(TEEN_BASE, 100), f(TEEN_HAPPY, 100), f(TEEN_BOB_DOWN, 100), f(TEEN_HAPPY, 100)],
      loop: true
    },
    cleaning: {
      frames: [f(TEEN_SHOWER_1, 200), f(TEEN_SHOWER_2, 200)],
      loop: true
    },
    sleeping: {
      frames: [f(TEEN_BOB_DOWN, 1500), f(TEEN_BASE, 1500)],
      loop: true
    },
    evolving: {
      frames: [f(TEEN_BASE, 100), f(TEEN_HAPPY, 100)],
      loop: true
    }
  }
}
